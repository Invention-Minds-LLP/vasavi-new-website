<div class="modal-overlay" *ngIf="showModal">
  <div class="modal-container">
    <div class="modal-header">
      <h4>Patient Details</h4>
      <button class="btn-close" (click)="closeModal()"><i class="fa-solid fa-x"></i></button>
    </div>

    <div class="modal-body">
      <form [formGroup]="appointmentForm" (ngSubmit)="submitForm()" novalidate>
        <!-- Plan -->
        <div class="form-group">
          <label>Plan Name</label>
          <input formControlName="plan" type="text" [value]="planName" placeholder="Enter the Package Name" [disabled]="true"/>
          <div class="error" *ngIf="submitted && f['plan'].errors">
            <small *ngIf="f['plan'].errors['required']">Plan name is required</small>
          </div>
        </div>

        <!-- Name -->
        <div class="form-group">
          <label>Name</label>
          <input formControlName="name" type="text" placeholder="Enter Your Name" />
          <div class="error" *ngIf="submitted && f['name'].errors">
            <small *ngIf="f['name'].errors['required']">Name is required</small>
            <small *ngIf="f['name'].errors['pattern']">Only letters and spaces allowed</small>
            <small *ngIf="f['name'].errors['minlength']">At least 2 characters</small>
          </div>
        </div>

        <!-- Phone -->
        <div class="form-group">
          <label>Phone</label>
          <input formControlName="phone" type="text" placeholder="Enter Contact Number" />
          <div class="error" *ngIf="submitted && f['phone'].errors">
            <small *ngIf="f['phone'].errors['required']">Contact number is required</small>
            <small *ngIf="f['phone'].errors['pattern']">Enter valid 10-digit number</small>
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label>Email</label>
          <input formControlName="email" type="email" placeholder="Enter Email Id" />
          <div class="error" *ngIf="submitted && f['email'].errors">
            <small *ngIf="f['email'].errors['required']">Email is required</small>
            <small *ngIf="f['email'].errors['email']">Invalid email format</small>
          </div>
        </div>

        <!-- Date -->
        <div class="form-group">
          <label>Preferred Date</label>
          <input formControlName="date" type="date" />
          <div class="error" *ngIf="submitted && f['date'].errors">
            <small *ngIf="f['date'].errors['required']">Date is required</small>
          </div>
        </div>

        <!-- Message -->
        <div class="form-group">
          <label>Description</label>
          <input formControlName="message" type="text" placeholder="Leave Your Message Here" />
          <div class="error" *ngIf="submitted && f['message'].errors">
            <small *ngIf="f['message'].errors['required']">Message is required</small>
            <small *ngIf="f['message'].errors['minlength']">Minimum 10 characters required</small>
          </div>
        </div>

        <button type="submit" [disabled]="isLoading">
          <span *ngIf="!isLoading">Submit</span>
          <span *ngIf="isLoading"><i class="bx bx-loader bx-spin"></i> Submitting...</span>
        </button>

        <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
        <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>
      </form>
    </div>
  </div>
</div>
