<div class="callback-container">
    <header>
        <h2>Get a Callback</h2>
    </header>

    <main class="callback-form">
        <!-- Step 1: User details form -->
        <form #callbackForm="ngForm" (ngSubmit)="onSubmit(callbackForm)" *ngIf="!showOTP && !successMessage" novalidate>

            <!-- Name -->
            <div class="form-group">
                <label for="name">Name*</label>
                <input type="text" id="name" name="name" required minlength="3" [(ngModel)]="formData.name"
                    #name="ngModel" placeholder="Enter your name" class="form-control" />
                <div class="error" *ngIf="name.invalid && (name.dirty || name.touched)">
                    <small *ngIf="name.errors?.['required']">Name is required.</small>
                    <small *ngIf="name.errors?.['minlength']">Minimum 3 characters required.</small>
                </div>
            </div>

            <!-- Mobile -->
            <div class="form-group">
                <label for="mobile">Mobile Number*</label>
                <input type="tel" id="mobile" name="mobile" required pattern="^[6-9]\\d{9}$"
                    [(ngModel)]="formData.mobile" #mobile="ngModel" placeholder="Enter your mobile number"
                    class="form-control" />
                <div class="error" *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)">
                    <small *ngIf="mobile.errors?.['required']">Mobile number is required.</small>
                    <small *ngIf="mobile.errors?.['pattern']">Enter a valid 10-digit number.</small>
                </div>
            </div>

            <button type="submit" class="submit-btn" [disabled]="!callbackForm.valid">
                Submit
            </button>
        </form>

        <!-- Step 2: OTP -->
        <div *ngIf="showOTP && !successMessage" class="otp-section">
            <h3>Enter OTP</h3>
            <p>Please enter the OTP sent to your mobile number.</p>
            <div class="form-group">
                <input type="text" id="otp" name="otp" required maxlength="6" minlength="6" [(ngModel)]="formData.otp"
                    #otp="ngModel" placeholder="Enter OTP (e.g., 123456)" class="form-control" />
                <div class="error" *ngIf="otp.invalid && (otp.dirty || otp.touched)">
                    <small *ngIf="otp.errors?.['required']">OTP is required.</small>
                    <small *ngIf="otp.errors?.['minlength']">OTP must be 6 digits.</small>
                </div>
            </div>

            <button type="button" class="submit-btn" (click)="verifyOTP()" [disabled]="otp.invalid">
                Verify OTP
            </button>
        </div>

        <!-- Success message -->
        <div *ngIf="successMessage" class="success-message">
            <p>{{ successMessage }}</p>
        </div>
    </main>

    
</div>